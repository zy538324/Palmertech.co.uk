{% extends "base.html" %}
{% block title %}Contact | Palmertech{% endblock %}
{% block content %}
<section class="contact eye-catching">
    <h3>Get in Touch</h3>
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul class="flashes">
          {% for message in messages %}
            <li>{{ message }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
    <form action="/contact" method="post" class="contact-form" novalidate>
        <div class="hp-field" aria-hidden="true">
            <label for="company">Company</label>
            <input type="text" id="company" name="company" tabindex="-1" autocomplete="off">
        </div>
        <input type="hidden" name="form_token" value="{{ form_token }}">
        <label>Name *</label><input type="text" name="name" required><br>
        <label>Email address *</label><input type="email" name="email" required><br>
        <label>Phone number *</label><input type="tel" name="phone" required><br>
  <label>Message *</label><textarea name="message" required class="auto-expand" rows="3"></textarea><br>
        {% if captcha_site_key %}
        <div class="captcha-wrapper">
            <span id="captcha-instructions" class="sr-only">This step prevents automated spam submissions.</span>
            <div class="h-captcha" data-sitekey="{{ captcha_site_key }}" data-callback="onHCaptchaSuccess" aria-describedby="captcha-instructions"></div>
        </div>
        {% elif fallback_challenge_question %}
        <div class="captcha-wrapper">
            <label for="challenge_answer">{{ fallback_challenge_question }}</label>
            <input type="text" id="challenge_answer" name="challenge_answer" inputmode="numeric" pattern="[0-9]*" autocomplete="off" required>
            <p class="form-hint">Human check: add the two numbers together. Bots struggle here.</p>
        </div>
        {% endif %}
        <label><input type="checkbox" name="consent" value="yes" required> I allow this website to store my submission so they can respond to my inquiry.</label><br>
        <button type="submit">Submit</button>
    </form>
    <p><a href="mailto:contact@palmertech.co.uk">Email us at contact@palmertech.co.uk</a></p>

</section>
{% block scripts %}
<script>
document.addEventListener('DOMContentLoaded', function() {
  var textarea = document.querySelector('.auto-expand');
  if (textarea) {
    textarea.addEventListener('input', function() {
      this.style.height = 'auto';
      this.style.height = (this.scrollHeight) + 'px';
    });
  }
});
function onHCaptchaSuccess() {
  // Intentionally blank callback to support explicit success hooks later.
}
</script>
{% if captcha_site_key %}
<script src="https://js.hcaptcha.com/1/api.js" async defer></script>
{% endif %}
{% endblock %}
{% endblock %}
